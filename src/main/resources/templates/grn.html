<!DOCTYPE html>
<html lang="en">

<head th:replace="~{fragment :: headerfragment}"></head>

<body>

    <!-- nav bar start -->
    <nav th:replace="~{fragment :: topnavbarfragment}"> </nav>
    <!-- nav bar end -->

    <div class="container-fluid"> <!--Use for a full width container-->

        <!-- title area start -->
        <div class="row p-1 mt-1"><!-- 0.25rem padding on all 4 sides of the element (1 rem = 16 pixels)
                                       0.25rem  margin-top  -->

            <div class="col-12 p-3 d-flex justify-content-center divTitle">
                <!--1rem padding on all 4 sides of the element (1 rem = 16 pixels) |Apply display utilities to create a flexbox container and convert direct child elements to flex items.| justify content center | CSS class  -->
                <i class="fa-solid fa-user-tie fa-2x"></i>
                <h2 class="h2 ms-3">GRN management</h2><!--1rem set margin start  -->
            </div>
        </div>
        <!-- title area end -->

        <!-- offcanvas button area start -->
        <div class="row">
            <div class="col-1"></div>
            <div class="col-2">
                <button class="btn btn-primary offCanvasButton" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">
                    <i class="fa-solid fa-user-plus"></i>
                    Add New GRN
                </button>
            </div>
            <div class="col-9"></div>
        </div>
        <!-- offcanvas button area end -->

        <!--main table area start -->
        <div class="row">
            <div class="col-1"></div>
            <div class="col-10 mt-1 divTable">
                <div class="container-fluid">
                    <table class="table" id="tableGRN">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>GRN No</th>
                                <th>Supplier Name</th>
                                <th>Received Date</th>
                                <th>Item List</th>
                                <th>Total Amount(Rs.)</th>
                                <th>Status</th>

                            </tr>
                        </thead>
                        <tbody id="tableGRNBody">

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-1"></div>
        </div>
        <!--main table arae end -->

        <!-- offcanvas area start -->
        <div class="offcanvas offcanvas-bottom offCanvasArea" style="height: 600px;" tabindex="-1" data-bs-scroll="true"
            data-bs-backdrop="false" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
            <div class="offcanvas-body small">

                <!-- form area start -->
                <div class="row">
                    <div class="col-12">
                        <div class="divForm"><!--css class | 1rem set margin top | 4rem set margin end  -->
                            <form id="formGRN">

                                <!-- required mark and offcanvas close button start -->
                                <div class="row">

                                    <!-- offcanvas close button start -->
                                    <div class="col-1">
                                        <button type="button" class=" offCanvasCloseBtn" data-bs-dismiss="offcanvas"
                                            aria-label="Close">X</button>
                                    </div>
                                    <!-- offcanvas close button start -->

                                    <div class="col-9"></div>

                                    <!-- required mark start -->
                                    <div class="col-1">
                                        <span class="fw-bold text-danger">*Required</span><!--The letters are red  -->
                                    </div>
                                    <!-- required mark end -->

                                    <div class="col-1"></div>

                                </div>
                                <!-- required mark and offcanvas close button end -->

                                <!-- main and inner form area start -->
                                <div class="row mt-3">
                                    <!-- main form area start -->
                                    <div class="col-6">

                                        <!-- Supplier area start-->
                                        <div class="row">
                                            <div class="input-group">
                                                <label class="input-group-text lablBg" for="selectSupplier">Supplier &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:
                                                    <span class="fw-bold text-danger">*</span></label>
                                                <select class="form-select" id="selectSupplier"
                                                    onchange="selectDainamicElementValidater(this , 'gRN', 'purchaserequest_id')"
                                                    onclick="selectDainamicElementValidater(this , 'gRN', 'purchaserequest_id')"
                                                    data-bs-toggle="tooltip"
                                                    title="Select the Supplier correctly here.">
                                                    <option selected disabled>Select Supplier</option>
                                                    <option value=""></option>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>
                                        <!-- Supplier area end-->
                                         <!-- Supplier bill no start-->
                                        <div class="row mt-4">
                                            <div class="input-group">
                                                <span class="input-group-text lablBg">Supplier Bill No :
                                                    <span class="fw-bold text-danger">*</span>
                                                </span>
                                                <input type="text" placeholder="
                                            Enter Supplier Bill No " class="form-control"
                                                    aria-label="Sizing example input"
                                                    aria-describedby="inputGroup-sizing-default" id="textSupplierBillNo"
                                                    onchange="textValidator(this, '^.*$', 'gRN', 'suplierbillno')"
                                                    required data-bs-toggle="tooltip"
                                                    title="Please enter the Supplier Bill No correctly">
                                            </div>

                                        </div>
                                        <!-- Supplier Bill No end-->
                                        <!-- Received Date start-->
                                        <div class="row mt-4">
                                            <div class="input-group">
                                                <span class="input-group-text lablBg">Received Date &nbsp;:
                                                    <span class="fw-bold text-danger">*</span>
                                                </span>
                                                <input type="date" placeholder="
                                            Enter Received Date " class="form-control"
                                                    aria-label="Sizing example input"
                                                    aria-describedby="inputGroup-sizing-default" id="dateReceivedDate"
                                                    onchange="textValidator(this, '^.*$', 'gRN', 'receivedate')"
                                                    required data-bs-toggle="tooltip"
                                                    title="Please enter the Received date correctly">
                                            </div>

                                        </div>
                                        <!-- Received Date end-->
                                         <!-- Discount Rate start-->
                                        <div class="row mt-4">
                                            <div class="input-group">
                                                <span class="input-group-text lablBg">Discount Rate &nbsp; : <span
                                                        class="fw-bold text-danger">*</span></span>
                                                <input type="text" placeholder="Enter Discount Rate" class="form-control"
                                                    aria-label="Sizing example input"
                                                    aria-describedby="inputGroup-sizing-default" id="textDiscountRate"
                                                    required
                                                    onkeyup="textValidator(this, '^.*$', 'gRN', 'discountrate')"
                                                    onclick="textValidator(this, '^.*$', 'gRN', 'discountrate')"
                                                    data-bs-toggle="tooltip"
                                                    title="Enter the Discount Rate correctly here.">
                                            </div>
                                        </div>
                                        <!-- Discount Rate area end-->
                                        <!-- Total Amount area start-->
                                        <div class="row mt-4">
                                            <div class="input-group">
                                                <span for="textTotalAmount" class="input-group-text lablBg">Total Amount &nbsp; &nbsp; : <span
                                                        class="fw-bold text-danger">*</span></span>
                                                <input type="text" placeholder="Enter Total Amount" class="form-control"
                                                    aria-label="Sizing example input"
                                                    aria-describedby="inputGroup-sizing-default" id="textTotalAmount"
                                                    required
                                                    onkeyup="textValidator(this, '^.*$', 'gRN', 'totalamount')"
                                                    onclick="textValidator(this, '^.*$', 'gRN', 'totalamount')"
                                                    data-bs-toggle="tooltip"
                                                    title="Enter the Total Amount correctly here.">
                                            </div>
                                        </div>
                                        <!-- Total Amount area end-->
                                         <!-- Net Amount area start-->
                                        <div class="row mt-4">
                                            <div class="input-group">
                                                <span for="textNetAmount" class="input-group-text lablBg">Net Amount &nbsp; &nbsp; &nbsp; : <span
                                                        class="fw-bold text-danger">*</span></span>
                                                <input type="text" placeholder="Enter Net Amount" class="form-control"
                                                    aria-label="Sizing example input"
                                                    aria-describedby="inputGroup-sizing-default" id="textNetAmount"
                                                    required
                                                    onkeyup="textValidator(this, '^.*$', 'gRN', 'netamount')"
                                                    onclick="textValidator(this, '^.*$', 'gRN', 'netamount')"
                                                    data-bs-toggle="tooltip"
                                                    title="Enter the Net Amount correctly here.">
                                            </div>
                                        </div>
                                        <!-- Net Amount area end-->
                                        <!--GRN Status area start-->
                                        <div class="row mt-4">
                                            <div class="input-group mb-3">
                                                <label class="input-group-text lablBg" for="selectGRNStatus">GRN
                                                    Status &nbsp; &nbsp; &nbsp; :
                                                    <span class="fw-bold text-danger">*</span></label>
                                                <select class="form-select" id="selectGRNStatus"
                                                    onchange="selectDainamicElementValidater(this , 'gRN', 'grnstatus_id')"
                                                    onclick="selectDainamicElementValidater(this , 'gRN', 'grnstatus_id')"
                                                    data-bs-toggle="tooltip"
                                                    title="Select the GRN Status correctly here.">
                                                    <option selected disabled>Select GRN Status</option>
                                                    <option value=""></option>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>
                                        <!-- GRN Status area end-->
                                        
                                    </div>
                                    <!-- main form area end -->
                                    <!-- inner form and table start -->
                                    <div class="col-6">
                                        <!-- inner form area start -->
                                        <!-- Item and Unit Price area start -->
                                        <div class="row">
                                            <!-- Item area start-->
                                            <div class="col-6">
                                                <div class="input-group">
                                                    <label class="input-group-text lablBg" for="selectItem">Item
                                                        &nbsp; &nbsp; &nbsp; :
                                                        <span class="fw-bold text-danger">*</span></label>
                                                    <select class="form-select" id="selectItem"
                                                        onchange="selectDainamicElementValidater(this , 'grnHasItem', 'item_id')"
                                                        onclick="selectDainamicElementValidater(this , 'grnHasItem', 'item_id')"
                                                        data-bs-toggle="tooltip"
                                                        title="Select the Item correctly here.">
                                                        <option selected disabled>Select Item</option>
                                                        <option value=""></option>
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <!-- Item area end-->
                                            <!-- Unit Price area start-->
                                            <div class="col-6">
                                                <div class="input-group">
                                                    <span for="textUnitPrice" class="input-group-text lablBg"
                                                        id="inputGroup-sizing-default">Unit Price : <span
                                                            class="fw-bold text-danger">*</span></span>
                                                    <input placeholder="Enter Unit Price" type="text" class="form-control"  aria-label="Sizing example input"
                                                        aria-describedby="inputGroup-sizing-default" id="textUnitPrice"
                                                        required
                                                        onkeyup="textValidator(this, '^.*$', 'grnHasItem', 'uniteprice')"
                                                        onclick="textValidator(this, '^.*$', 'grnHasItem', 'uniteprice')"
                                                        data-bs-toggle="tooltip"
                                                        title="Enter the Unit Price correctly here.">
                                                </div>
                                            </div>

                                            <!-- Unit Price area end-->
                                        </div>
                                        <!-- Item and Unit Price area end -->
                                        <!-- Quantity and Line Price area start -->
                                        <div class="row mt-4">
                                            <!-- Quantity area start -->
                                            <div class="col-6">
                                                <div class="input-group">
                                                    <span for="textQuantity" class="input-group-text lablBg">Quantity :
                                                        <span class="fw-bold text-danger">*</span></span>
                                                    <input type="number" class="form-control"
                                                        placeholder="Enter Quantity" aria-label="Sizing example input"
                                                        aria-describedby="inputGroup-sizing-default" id="textQuantity"
                                                        required
                                                        onkeyup="textValidator(this, '^.*$', 'grnHasItem', 'quentity')"
                                                        onclick="textValidator(this, '^.*$', 'grnHasItem', 'quentity')"
                                                        data-bs-toggle="tooltip"
                                                        title="Enter the Quantity correctly here.">
                                                </div>
                                            </div>
                                            <!-- Quantity area end -->
                                            <!-- Line Price area start -->
                                            <div class="col-6">
                                                <div class="input-group">
                                                    <span for="textQuantity" class="input-group-text lablBg">Line
                                                        Price :
                                                        <span class="fw-bold text-danger">*</span></span>
                                                    <input type="number" class="form-control"
                                                        placeholder="Enter Line Price" aria-label="Sizing example input"
                                                        aria-describedby="inputGroup-sizing-default" id="textLinePrice"
                                                        required
                                                        onkeyup="textValidator(this, '^.*$', 'grnHasItem', 'lineprice')"
                                                        onclick="textValidator(this, '^.*$', 'grnHasItem', 'lineprice')"
                                                        data-bs-toggle="tooltip"
                                                        title="Enter the Line Price correctly here.">
                                                </div>
                                            </div>
                                            <!-- Line Price area end -->


                                        </div>
                                        <!-- Quantity and Line Price area end -->
                                        <!-- Quantity and Line Price area start -->
                                        <div class="row mt-4">
                                            <!--Free Quantity area start -->
                                            <div class="col-6">
                                                <div class="input-group">
                                                    <span for="textFreeQuantity" class="input-group-text lablBg">Free Quantity :
                                                        <span class="fw-bold text-danger">*</span></span>
                                                    <input type="number" class="form-control"
                                                        placeholder="Enter Free Quantity" aria-label="Sizing example input"
                                                        aria-describedby="inputGroup-sizing-default" id="textFreeQuantity"
                                                        required
                                                        onkeyup="textValidator(this, '^.*$', 'grnHasItem', 'freequentity')"
                                                        onclick="textValidator(this, '^.*$', 'grnHasItem', 'freequentity')"
                                                        data-bs-toggle="tooltip"
                                                        title="Enter the Free Quantity correctly here.">
                                                </div>
                                            </div>
                                            <!--Free Quantity area end -->
                                            <!--Total Quantity area start -->
                                            <div class="col-6">
                                                <div class="input-group">
                                                    <span for="textTotalQuantity" class="input-group-text lablBg">Total Quantity :
                                                        <span class="fw-bold text-danger">*</span></span>
                                                    <input type="number" class="form-control"
                                                        placeholder="Enter Quantity" aria-label="Sizing example input"
                                                        aria-describedby="inputGroup-sizing-default" id="textTotalQuantity"
                                                        required
                                                        onkeyup="textValidator(this, '^.*$', 'grnHasItem', 'totalquentity')"
                                                        onclick="textValidator(this, '^.*$', 'grnHasItem', 'totalquentity')"
                                                        data-bs-toggle="tooltip"
                                                        title="Enter the Total Quantity correctly here.">
                                                </div>
                                            </div>
                                            <!--Total Quantity area end -->


                                        </div>
                                        <!--Free Quantity and Total Quantity area end --> 
                                        <!-- inner form area end -->



                                        <!--inner form button row start -->
                                        <div class="row mt-4">

                                            <div class="col-1"></div>

                                            <!-- clear btn area start -->
                                            <div class="col-3">
                                                <button type="button" id="btnInnerClear" class="btn btnClear">
                                                    <i class="fa-solid fa-eraser"></i>
                                                    Clear
                                                </button>
                                            </div>
                                            <!-- clear btn area end -->

                                            <div class="col-2"></div>

                                            <!-- update button area start -->
                                            <div class="col-3">
                                                <button type="button" id="btnGRNItemUpdate"
                                                    class=" btn btnUpdate" onclick="buttonGRNItemUpdate()">
                                                    <i class="fa-solid fa-file-pen"></i>
                                                    Update
                                                </button>
                                            </div>
                                            <!-- update button area end -->

                                            <!-- Add btn area start -->
                                            <div class="col-3">
                                                <button type="button" id="btnGRNItemSubmit"
                                                    class=" btn btnAdd" onclick="buttonGRNItemSubmit()">
                                                    <!-- buttonEmpSubmit function eka (employee.js)-->
                                                    <i class="fa-solid fa-file-circle-plus"></i>
                                                    Add
                                                </button>
                                            </div>
                                            <!-- Add btn area end -->

                                        </div>
                                        <!--inner form button row end -->
                                        <!--inner table row start -->
                                        <div class="row mt-4 ms-1 me-1">
                                            <div class="col-12 divTable">
                                                <div class="container-fluid">
                                                    <table class="table" id="tableInner">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Item Name</th>
                                                                <th>Unit Price(Rs.)</th>
                                                                <th>Quantity</th>
                                                                <th>Line Price(Rs.)</th>
                                                                <th>Free Quantity</th>
                                                                <th>Total Quantity</th>


                                                            </tr>
                                                        </thead>
                                                        <tbody id="tableInnerBody">

                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <!--inner table row end -->
                                        


                                    </div>
                                    <!-- inner form and table end -->
                                     <!--overall button row start -->
                                        <div class="row mt-4">

                                            <div class="col-1"></div>

                                            <!-- clear btn area start -->
                                            <div class="col-3">
                                                <button type="button" id="buttonGRNClear" class="btn btnClear">
                                                    <i class="fa-solid fa-eraser"></i>
                                                    Clear
                                                </button>
                                            </div>
                                            <!-- clear btn area end -->

                                            <div class="col-2"></div>

                                            <!-- update button area start -->
                                            <div class="col-3">
                                                <button type="button" id="btnGRNUpdate" class=" btn btnUpdate"
                                                    onclick="buttonGRNUpdate()">
                                                    <i class="fa-solid fa-file-pen"></i>
                                                    Update
                                                </button>
                                            </div>
                                            <!-- update button area end -->

                                            <!-- Add btn area start -->
                                            <div class="col-3">
                                                <button type="button" id="btnGRNSubmit" class=" btn btnAdd"
                                                    onclick="buttonGRNSubmit()">
                                                    <!-- buttonEmpSubmit function eka (employee.js)-->
                                                    <i class="fa-solid fa-file-circle-plus"></i>
                                                    Add
                                                </button>
                                            </div>
                                            <!-- Add btn area end -->

                                        </div>
                                        <!--overall button row end -->
                                </div>
                                <!-- main and inner form area end -->


                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- offcanvas area end -->

    </div>

    <!-- view/print employee -->
    <!-- Modal -->
    <!-- offcanvas area start -->
    <div class="offcanvas offcanvas-bottom offCanvasArea" style="height: 600px;" tabindex="-1" data-bs-scroll="true"
        data-bs-backdrop="false" id="offcanvasBottomView" aria-labelledby="offcanvasBottomLabel">
        <div class="offcanvas-header">
            <!--offcanvas close button start -->
            <div class="row">

                <!-- offcanvas close button start -->
                <div class="col-1">
                    <button type="button" class=" offCanvasCloseBtn" data-bs-dismiss="offcanvas"
                        aria-label="Close">X</button>
                </div>
                <!-- offcanvas close button start -->

                <div class="col-11"></div>



            </div>
            <!--offcanvas close button end -->
        </div>
        <div class="offcanvas-body small">
            <!-- employee view area start -->
            <div class="row">
                <div class="col-3"></div>
                <div class="col-6">
                    <table id="tableView" style="border: none;">
                        <thead>
                            <th colspan="3"
                                style="background-color:white; color:black; border: none; text-align: center; font-size:x-large;">
                                Employee Details</th>
                        </thead>
                        <tbody style="border: none;">
                            <tr>
                                <th colspan="3" style="text-align: center;border: none;"><img src=""
                                        alt="Employee photo" width="30" height="30"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Full name</th>
                                <th style="color: black; border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                    id="fullNameView"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Calling name</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                    id="callingNameView"></th>
                            </tr>
                            <tr>
                                <th style="color:black;border: none; text-align: left;">Nic</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                    id="nicView"></th>

                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Gender</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                    id="genderView"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Date Of Birth</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                    id="dobView"></th>

                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Email</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                    id="emailView"></th>
                            </tr>
                            <tr>
                                <th style="color:black;border: none; text-align: left;">Mobile No</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black;border: none; text-align: left; font-style: italic; font-weight: 500;"
                                    id="mobileView"></th>

                            </tr>
                            <tr>
                                <th style="color:black;border: none; text-align: left;">Land No</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black;border: none; text-align: left; font-style: italic; font-weight: 500;"
                                    id="landNoView"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Address </th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left;border: none; font-style: italic; font-weight: 500;"
                                    id="addressView"></th>

                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Note</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left;border: none; font-style: italic; font-weight: 500;"
                                    id="noteView"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left; border: none;">Designation </th>
                                <th style="color: black; border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; border: none; text-align: left; font-style: italic; font-weight: 500;"
                                    id="designationView"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Civilstatus</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left;border: none; font-style: italic; font-weight: 500;"
                                    id="civilStatusView"></th>
                            </tr>
                            <tr>
                                <th style="color:black; text-align: left;border: none;">Employee status</th>
                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                <th style="color:black; text-align: left;border: none; font-style: italic; font-weight: 500;"
                                    id="employeeStatusView"></th>
                            </tr>
                        </tbody>

                    </table>
                </div>
                <div class="col-3"></div>
            </div>
            <!-- employee view table area end -->



            <div class="row mt-3">
                <div class="col-10"></div>
                <div class="col-2">
                    <button type="button" class=" offCanvasCloseBtn p-2" onclick="buttonPrintRow()">
                        <i class="fa-solid fa-print" style="color: #ffffff;"></i>
                        Print</button>
                </div>
            </div>
        </div>
    </div>
    <!-- offcanvas area end -->

    <!-- link js files -->
    <script src="/jsFiles/common.js"></script>

    <script src="/jsFiles/tableFunction.js"></script>

    <script src="/jsFiles/grn.js"></script>

    <script src="/jsFiles/validatorFunction.js"></script>



</body>

</html>