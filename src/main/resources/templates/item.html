<!DOCTYPE html>
<html lang="en">

<head th:replace="~{fragment :: headerfragment}"></head>

<body>

    <!-- nav bar start -->
    <nav th:replace="~{fragment :: topnavbarfragment}"> </nav>
    <!-- nav bar end -->

    <div class="container-fluid"> <!--Use for a full width container-->
        <!-- title area start -->
        <div class="row p-1 mt-1"><!-- 0.25rem padding on all 4 sides of the element (1 rem = 16 pixels)
            0.25rem  margin-top  -->

            <div class="col-12 p-3 d-flex justify-content-center divTitle">
                <!--1rem padding on all 4 sides of the element (1 rem = 16 pixels) |Apply display utilities to create a flexbox container and convert direct child elements to flex items.| justify content center | CSS class  -->
                <i class="fa-solid fa-layer-group fa-2xl mt-3" style="color: #fcfcfc;"></i>
                <h2 class="h2 ms-3">Item management</h2><!--1rem set margin start  -->
            </div>
        </div>
        <!-- title area end -->

        <!-- offcanvas button area start -->
        <div class="row">
            <div class="col-1"></div>
            <div class="col-2">
                <button class="btn btn-primary offCanvasButton" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom" onclick="refreshItemForm()">
                    <i class="fa-solid fa-circle-plus"></i>
                    Add New Item
                </button>
            </div>
            <div class="col-9"></div>
        </div>
        <!-- offcanvas button area end -->

        <!-- table area start -->
        <div class="row">
            <div class="col-1"></div>
            <div class="col-10 mt-1 divTable">
                <div class="container-fluid">
                    <table class="table" id="tableItem">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Item code</th>
                                <th>Item Name</th>
                                <th>Purchase price</th>
                                <th>Profit rate</th>
                                <th>Sales Price</th>
                                
                                <th>ROQ</th>
                                <th>Status</th>

                            </tr>
                        </thead>
                        <tbody id="tableItemBody">

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-1"></div>
        </div>
        <!-- table arae end -->

        <!-- offcanvas area start -->
        <div class="offcanvas offcanvas-bottom offCanvasArea" style="height: 600px;" tabindex="-1" data-bs-scroll="true"
            data-bs-backdrop="false" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
            <div class="offcanvas-body small">

                <!-- form area start -->
                <div class="row">
                    <div class="col-12">
                        <div class="divForm"><!--css class | 1rem set margin top | 4rem set margin end  -->
                            <form onsubmit="return false" id="formItem">

                                <!-- required mark and offcanvas close button start -->
                                <div class="row">

                                    <!-- offcanvas close button start -->
                                    <div class="col-1">
                                        <button type="button" class=" offCanvasCloseBtn" data-bs-dismiss="offcanvas"
                                            aria-label="Close">X</button>
                                    </div>
                                    <!-- offcanvas close button close -->

                                    <div class="col-9"></div>

                                    <!-- required mark start -->
                                    <div class="col-1">
                                        <span class="fw-bold text-danger">*Required</span><!--The letters are red  -->
                                    </div>
                                    <!-- required mark end -->

                                    <div class="col-1"></div>

                                </div>
                                <!-- required mark and offcanvas close button end -->

                                <!-- Item Category , Item Brand and Item Subcategory row start-->
                                <div class="row mt-4">

                                    <!-- Item Category area start -->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <label class="input-group-text lablBg" for="selectItemCategory">Item
                                                Category &nbsp; &nbsp; &nbsp; : <span class="fw-bold text-danger">*</span></label>
                                            <select id="selectItemCategory" class="form-select" data-bs-toggle="tooltip"
                                                title="select Item Category correctly here."
                                                >
                                                <option selected disabled>Select Item Category</option>
                                                <option value=""></option>
                                                <option value=""></option>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Item Category area end -->

                                    <!-- Item Brand area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <label class="input-group-text lablBg" for="selectItemBrand">Item Brand : <span class="fw-bold text-danger">*</span></label>
                                            <select id="selectItemBrand" class="form-select"
                                                onchange=" selectDainamicElementValidater(this , 'item', 'brand_id'); generateItemName();"
                                                onclick=" selectDainamicElementValidater(this , 'item', 'brand_id'); generateItemName();"
                                                data-bs-toggle="tooltip" title="Select the brand name correctly here.">
                                                <option value="" selected disabled>Select Item Brand</option>
                                                <option value=""></option>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Item Brand area end-->

                                    <!-- Item Subcategory area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <label class="input-group-text lablBg" for="selectItemSubcategory">Item
                                                Subcategory:
                                                <span class="fw-bold text-danger">*</span></label>
                                            <select class="form-select" id="selectItemSubcategory"
                                                onchange=" selectDainamicElementValidater(this , 'item', 'subcategory_id'); generateItemName();"
                                                onclick=" selectDainamicElementValidater(this , 'item', 'subcategory_id'); generateItemName();"
                                                data-bs-toggle="tooltip"
                                                title="Select the Item subcategory correctly here.">
                                                <option selected disabled>Select Item Subcategory</option>
                                                <option value=""></option>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Item Subcategory area end-->

                                </div>
                                <!-- Item Category , Item Brand and Item Subcategory row end-->

                                <!--Item name and Item Status row start -->
                                <div class="row mt-4">

                                    <!-- Item Name start-->
                                    <div class="col-8">
                                        <div class="input-group mb-3">
                                            <span class="input-group-text lablBg">Item
                                                Name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:
                                                <span class="fw-bold text-danger">*</span>
                                            </span>
                                            <input type="text" placeholder="
                                Enter Item Name " class="form-control" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textItemName"
                                                oninput="textValidator(this, '^.*$', 'item', 'itemname')"
                                                onclick="textValidator(this, '^.*$', 'item', 'itemname')" required
                                                data-bs-toggle="tooltip"
                                                title="After entering the item's Category,Brand,Subcategory, Package type and Unit type correctly, Item Name will be entered.">
                                        </div>
                                    </div>
                                    <!-- Item Name end-->

                                    

                                    <!-- Item Status area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <label class="input-group-text lablBg" for="selectItemStatus">Item Status &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:
                                                <span class="fw-bold text-danger">*</span></label>
                                            <select class="form-select" id="selectItemStatus"
                                                onchange="selectDainamicElementValidater(this , 'item', 'itemstatus_id')"
                                                onclick="selectDainamicElementValidater(this , 'item', 'itemstatus_id')"
                                                data-bs-toggle="tooltip" title="Select the Item
                                Status correctly here.">
                                                <option selected disabled>Select Item Status</option>
                                                <option value=""></option>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Item Status area end-->

                                </div>
                                <!-- Item name and Item Status row end -->

                            
                                <!-- ROP , ROQ and Purchase Price row start-->
                                <div class="row mt-4">

                                    <!-- ROP area start -->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <span for="textROP" class="input-group-text lablBg">ROP &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: <span
                                                    class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter ROP" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textROP" required
                                                onkeyup="textValidator(this, '^.*$', 'item', 'rop')"
                                                onclick="textValidator(this, '^.*$', 'item', 'rop')"
                                                data-bs-toggle="tooltip"
                                                title="Enter the re-order point correctly here.">
                                        </div>
                                    </div>
                                    <!-- ROP area end -->

                                    <!-- ROQ area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <span for="textROQ" class="input-group-text lablBg">ROQ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : <span
                                                    class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter ROQ" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textROQ" required
                                                onkeyup="textValidator(this, '^.*$', 'item', 'roq')"
                                                onclick="textValidator(this, '^.*$', 'item', 'roq')"
                                                data-bs-toggle="tooltip"
                                                title="Enter the re-order quentity correctly here.">
                                        </div>
                                    </div>
                                    <!-- ROQ area end-->

                                    <!-- Purchase Price area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <span for="textPurchasePrice" class="input-group-text lablBg">Purchase Price &nbsp; &nbsp;:
                                                <span class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter Purchase Price" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textPurchasePrice"
                                                required onkeyup="textValidator(this, '^.*$', 'item', 'purchaseprice'); genarateSalesPrice();"
                                                onclick="textValidator(this, '^.*$', 'item', 'purchaseprice')  " 
                                                data-bs-toggle="tooltip"
                                                title="Enter the Purchase Price correctly here.">
                                        </div>
                                    </div>
                                    <!-- Purchase Price area end-->

                                </div>
                                <!-- ROP , ROQ and Purchase Price row end -->

                                <!-- Profit Ratio , Sales Price and Discount Ratio row start-->
                                <div class="row mt-4">

                                    <!-- Profit Ratio area start -->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <span for="textProfitRatio" class="input-group-text lablBg">Profit Ratio &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: <span
                                                    class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter Profit Ratio" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textProfitRatio"
                                                required onkeyup="textValidator(this, '^.*$', 'item', 'profitrate'); genarateSalesPrice();"
                                                onclick="textValidator(this, '^.*$', 'item', 'profitrate')"
                                                data-bs-toggle="tooltip" title="Enter the Profit Ratio correctly here.">
                                        </div>
                                    </div>
                                    <!-- Profit Ratio area end -->

                                    <!-- Sales Price area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <span for="textSalesPrice" class="input-group-text lablBg">Sales Price : <span
                                                    class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter Sales Price" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textSalesPrice"
                                                required onkeyup="textValidator(this, '^.*$', 'item', 'salesprice')"
                                                onclick="textValidator(this, '^.*$', 'item', 'salesprice')"
                                                data-bs-toggle="tooltip" title="Enter the Sales Price correctly here.">
                                        </div>
                                    </div>
                                    <!-- Sales Price area end-->

                                    <!-- Discount Ratio area start-->
                                    <div class="col-4">
                                        <div class="input-group mb-3">
                                            <span for="textDiscountRatio" class="input-group-text lablBg"
                                                id="inputGroup-sizing-default">Discount Ratio&nbsp; &nbsp; &nbsp;:
                                                <span class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter Discount Ratio" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textDiscountRatio"
                                                required onkeyup="textValidator(this, '^.*$', 'item', 'discountrate')"
                                                onclick="textValidator(this, '^.*$', 'item', 'discountrate')"
                                                data-bs-toggle="tooltip"
                                                title="Enter the Discount Ratio correctly here.">
                                        </div>
                                    </div>
                                    <!-- Discount Ratio area end-->

                                </div>
                                <!-- Profit Ratio , sales Price and Discount Ratio row end -->

                                <!-- Note , Item Photo and Item Photo Review row start-->
                                <div class="row mt-4">

                                    <!-- Note area start -->
                                    <div class="col-4">
                                        <div class="input-group">
                                            <span class="input-group-text lablBg">Note &nbsp; &nbsp; &nbsp; &nbsp;: <span
                                                    class="text-danger">(optional)</span></span>
                                            <textarea placeholder="
                                            Enter Note" id="textNote" class="form-control" aria-label="With textarea"
                                                onkeyup="textValidator(this, '^.*$', 'item', 'note')"
                                                onclick="textValidator(this, '^.*$', 'item', 'note')"
                                                data-bs-toggle="tooltip"
                                                title="Enter a note about the employee here"></textarea>
                                        </div>
                                    </div>
                                    <!-- Note area end -->

                                    <!-- Sales Price area start-->
                                    <div class="col-4">
                                        <!-- <div class="input-group mb-3">
                                            <span for="textSalesPrice" class="input-group-text lablBg"
                                                id="inputGroup-sizing-default">Sales Price &nbsp; &nbsp; &nbsp;: <span
                                                    class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter Sales Price" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textSalesPrice" requiredonkeyup="textValidator(this, '^.*$', 'item', 'salesprice')"
                                                onclick="textValidator(this, '^.*$', 'item', 'salesprice')" data-bs-toggle="tooltip" 
                                                title="Enter the Sales Price correctly here.">
                                        </div> -->
                                    </div>
                                    <!-- Sales Price area end-->

                                    <!-- Discount Ratio area start-->
                                    <div class="col-4">
                                        <!-- <div class="input-group mb-3">
                                            <span for="textDiscountRatio" class="input-group-text lablBg"
                                                id="inputGroup-sizing-default">Discount Ratio &nbsp; &nbsp; &nbsp;: <span
                                                    class="fw-bold text-danger">*</span></span>
                                            <input type="text" class="form-control" placeholder="
                                            Enter Discount Ratio" aria-label="Sizing example input"
                                                aria-describedby="inputGroup-sizing-default" id="textDiscountRatio" required onkeyup="textValidator(this, '^.*$', 'item', 'discountrate')"
                                                onclick="textValidator(this, '^.*$', 'item', 'discountrate')" data-bs-toggle="tooltip" 
                                                title="Enter the Discount Ratio correctly here.">
                                        </div> -->
                                    </div>
                                    <!-- Discount Ratio area end-->

                                </div>
                                <!-- Note , Item Photo and Item Photo Review row end -->

                                <!-- button row start-->
                                <div class="row mt-3 mb-4">

                                    <div class="col-1"></div>

                                    <!-- clear btn area start -->
                                    <div class="col-2">
                                        <button type="button" class="btn btnClear" onclick="clearItemForm()">
                                            <i class="fa-solid fa-eraser"></i>
                                            Clear
                                        </button>
                                    </div>
                                    <!-- clear btn area end -->

                                    <div class="col-5"></div>

                                    <!-- update button area start -->
                                    <div class="col-2">
                                        <button type="button" id="updateButton" class=" btn btnUpdate" onclick="buttonItemUpdate()">
                                            <i class="fa-solid fa-file-pen"></i>
                                            Update
                                        </button>
                                    </div>
                                    <!-- update button area end -->

                                    <!-- Add btn area start -->
                                    <div class="col-2">
                                        <button type="button" id="submitButton" class=" btn btnAdd" onclick="submitItemForm()">
                                            <!-- button Submit function eka (item.js)-->
                                            <i class="fa-solid fa-file-circle-plus"></i>
                                            Add
                                        </button>
                                    </div>
                                    <!-- Add btn area end -->

                                </div>
                                <!-- button row end -->
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- offcanvas area end -->

        <!-- view/print user -->
        <!-- Modal -->
        <!-- offcanvas area start -->
        <div class="offcanvas offcanvas-bottom offCanvasArea" style="height: 600px;" tabindex="-1" data-bs-scroll="true"
             data-bs-backdrop="false" id="offcanvasBottomItemView" aria-labelledby="offcanvasBottomLabel">
            <div class="offcanvas-header">
                <!--offcanvas close button start -->
                <div class="row">

                    <!-- offcanvas close button start -->
                    <div class="col-1">
                        <button type="button" class=" offCanvasCloseBtn" data-bs-dismiss="offcanvas"
                                aria-label="Close">X</button>
                    </div>
                    <!-- offcanvas close button start -->

                    <div class="col-11"></div>



                </div>
                <!--offcanvas close button end -->
            </div>
            <div class="offcanvas-body small">
                <!--                user print view area start-->
                <div>

                    <head>
                        <!-- link css file -->
                        <link rel="stylesheet" href="/Style/printView.css">
                    </head>

                    <body>
                    <div class="container-fluid bodyPrintView">
                        <div class = "row">
                            <div class = "col-1"></div>
                            <div class = "col-10">
                                <!--udin thiras kaha paata irak Adiima-->
                                <div style="height: 15px; background-color: rgb(233, 125, 2);"></div>
                                <!--wam kelawaren siras kaha paata irak Adiima-->
                                <!--<div class="left-vertical-line"></div>-->

                                <div class="printHeader">
                                    <div class="row">


                                        <div class="col-9 mt-4">
                                            <h1>Item Details</h1>
                                        </div>
                                        <div class="col-3">
                                            <img src="/image/printView.png" alt="Logo" class="img-fluid" width="300" height="120">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-3"></div>
                                    <div class="col-6">
                                        <table style="border: none;">

                                            <tbody style="border: none;">
                                            <tr>
                                                <th colspan="3" style="text-align: center;border: none;"><img src=""
                                                                                                              alt="User photo" width="30" height="30"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Brand name</th>
                                                <th style="color: black; border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="brandNameView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Subcategory name</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="SubcategoryView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black;border: none; text-align: left;">Item Name</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="itemNameView"></th>

                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Status</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="statusView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">ROP</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="rOPView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">ROQ</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="rOQView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Purchase Price</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="purchasePriceView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Profit Ratio</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="profitRatioView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Sales Price</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="salesPriceView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Discount Ratio</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="discountRatioView"></th>
                                            </tr>
                                            <tr>
                                                <th style="color:black; text-align: left;border: none;">Note</th>
                                                <th style="color: black;border: none;"> &nbsp; &nbsp; :- &nbsp; &nbsp; </th>
                                                <th style="color:black; text-align: left; font-style: italic; font-weight: 500;border: none;"
                                                    id="noteView"></th>
                                            </tr>
                                            </tbody>

                                        </table>
                                    </div>
                                    <div class="col-3"></div>
                                </div>
                                <!-- user view table area end -->

                                <div class="footer-bar">
                                    Contact: 033-2245678 | Email: info@brightbookshop.lk
                                </div>
                            </div>
                            <div class = "col-1"></div>
                        </div>

                    </div>
                    </body>






                    <div class="row mt-3">
                        <div class="col-10"></div>
                        <div class="col-2">
                            <button type="button" class=" offCanvasCloseBtn p-2" onclick="buttonPrintRow()">
                                <i class="fa-solid fa-print" style="color: #ffffff;"></i>
                                Print</button>
                        </div>
                    </div>
                </div>



    <!-- link js files -->
    <script src="/jsFiles/common.js"></script>

    <script src="/jsFiles/tableFunction.js"></script>

    <script src="/jsFiles/validatorFunction.js"></script>

    <script src="/jsFiles/item.js"></script>

    </div>
</body>

</html>